"use strict";(self.webpackChunkfl_assistant=self.webpackChunkfl_assistant||[]).push([[60],{6737:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(7462),s=n(7363),l=n.n(s),u=n(1871),i=n(8003),o=n(4533),r=n(9818),p=n(4668);var c=n(5145);const d=e=>l().createElement(o.App.Config,(0,a.Z)({pages:{default:g,"plugin/:id":o.Page.Plugin,"theme/:id":o.Page.Theme}},e)),g=e=>{let{handle:t}=e;const n=(0,r.getUpdaterStore)(),{setUpdateQueueItems:a}=(0,r.getUpdaterActions)(),{updatingAll:d,updateType:g,listStyle:m}=(0,r.useAppState)(t),{setUpdatingAll:h,setUpdateType:f,setListStyle:_}=(0,r.getAppActions)(t),{getContent:y}=(0,u.getWpRest)(),{plugins:S,themes:b,total:E,hasUpdates:U}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=(0,r.getSystemStore)(),[n,a]=(0,s.useState)(e),l=e=>{const{counts:t}=e,n=t["update/plugins"]?t["update/plugins"]:0,a=t["update/themes"]?t["update/themes"]:0;return{plugins:n,themes:a,combined:a+n}};(0,s.useLayoutEffect)((()=>{const{combined:e}=l(t.getState());return a(e),t.subscribe((()=>{const{combined:e}=l(t.getState());n!==e&&a(e)}))}),[]);const{plugins:u,themes:i,combined:o}=l(t.getState());return{total:o,hasUpdates:0<o,plugins:u,themes:i}}(),v=()=>{h(!0),y("updates").then((e=>{const{items:t}=e.data;a(t)})).catch((e=>{console.log(e),h(!1),alert((0,i.__)("Something went wrong. Please try again."))}))},A=()=>{const{updateQueue:e}=n.getState();Object.values(e).length||h(!1)};(0,s.useEffect)((()=>{A();const e=n.subscribe(A);return()=>e()}),[]);const C=()=>U?d?l().createElement(o.Button.Loading,null,(0,i.__)("Updating")):l().createElement(o.Button,{onClick:v},(0,i.__)("Update All")):null,k=()=>{const e={all:(0,i.sprintf)("All (%s)",E),plugins:(0,i.sprintf)("Plugin (%s)",S),themes:(0,i.sprintf)("Theme (%s)",b)},t={card:(0,i.__)("Cards"),list:(0,i.__)("Compact")};return l().createElement(o.Filter,{isSticky:!0},l().createElement(o.Filter.RadioGroupItem,{title:(0,i.__)("Type"),items:e,value:g,defaultValue:p.W.updateType,onChange:e=>f(e)}),l().createElement(o.Filter.RadioGroupItem,{title:(0,i.__)("Display As"),items:t,value:m,defaultValue:p.W.listStyle,onChange:e=>_(e)}),l().createElement(o.Filter.Button,{onClick:()=>{f(p.W.updateType),_(p.W.listStyle)}},(0,i.__)("Reset Filter")))};return l().createElement(o.Page,{title:(0,i.__)("Updates"),icon:l().createElement(c.Z,null),shouldShowBackButton:!1,actions:l().createElement(C,null),padY:!1,shouldScroll:!1},!U&&l().createElement(o.Layout.Box,null,(0,i.__)("You have no updates.")),U&&l().createElement(o.List.Updates,{updateType:g,getItemProps:(e,n)=>({...n,to:{pathname:`/${t}/${e.type}/${e.id}`,state:{item:e}}}),before:l().createElement(k,null),listStyle:m}))}},7462:(e,t,n)=>{function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}n.d(t,{Z:()=>a})}}]);